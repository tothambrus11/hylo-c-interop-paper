\section{Discussion and Future Work}

This paper presents a concrete architectural design for a C interoperability layer in Hylo. The core of the design is to leverage the Clang compiler front-end for its high-fidelity C parsing and ABI handling, which ensures correctness across platforms and C dialects. We propose a decoupled C binding generator that produces Hylo declarations. This approach simplifies maintenance, as changes to the interoperability layer do not need to affect the main compiler, and it allows Hylo's development to focus on language features rather than replicating the complex, platform-specific logic already perfected in Clang.

A known limitation is the handling of complex C preprocessor macros, which are difficult to translate directly and will often require manual C wrappers, and type qualifiers, which, apart from \texttt{const} don't have many precedents for being mapped.

The implementation of this design opens several avenues for future work:
\begin{itemize}
    \item \textbf{Full Implementation:} The immediate priority is to build the C binding generator and fully implement the C-to-Hylo mapping specification detailed in this paper.
    \item \textbf{Macro Translation Research:} A dedicated research effort is needed to expand support for translating complex and function-like C macros into idiomatic Hylo constructs, building upon existing work in the field.
    \item \textbf{Mapping Rule Library:} The design of the Hylo library for defining custom mapping rules needs to established through an iterative process through implementation. This will provide developers with the tools to create ergonomic and type-safe bindings for C libraries.
    \item \textbf{Foundation for C++ Interoperability:} This C interoperability layer is a prerequisite for the more complex challenge of C++ interoperability. While this C framework provides a foundation, seamless C++ integration will likely require a more tightly-coupled approach. For instance, the Hylo compiler may need to directly interact with Clang to request C++ template instantiations where required.
\end{itemize}

% TODO mention full implementation
% TODO mention as ISA overview and C/C++ implementation-defined representation overview as future work
% TODO mention macros and type qualifiers
% TODO mention C++ interoperability
% TODO mention C/C++ code automatic translation to Hylo